<?xml version="1.0" encoding="UTF-8"?>

<zkib-model>
	<datanode name="root">
		<finder name="process" type="process">
			<ejb-finder
				jndi="openejb:/local/soffid.ejb.com.soffid.iam.addons.recertification.core.RecertificationService"
				method="findActiveRecertificationProcesses" >
			</ejb-finder>
		</finder>
	</datanode>

	<datanode name="process">
		<finder name="role" type="role">
			<ejb-finder
				jndi="openejb:/local/soffid.ejb.com.soffid.iam.addons.recertification.core.RecertificationService"
				method="getPendingRecertifiedRoles">
				<parameter value="${instance}" />
			</ejb-finder>
		</finder>
		<finder name="roleDefinition" type="roleDefinition">
			<ejb-finder
				jndi="openejb:/local/soffid.ejb.com.soffid.iam.addons.recertification.core.RecertificationService"
				method="getPendingRecertifiedRoleDefinitions">
				<parameter value="${instance}" />
			</ejb-finder>
		</finder>
	</datanode>

	<datanode name="role" transient="true">
		<finder name="user" type="user">
			<ejb-finder
				jndi="java:/module/UserService-v2"
				method="findUserByUserName"
				if="${instance.rol.userCode != null}">
				<parameter value="${instance.rol.userCode}" />
			</ejb-finder>
		</finder>
		<finder name="account" type="account">
			<ejb-finder
				jndi="java:/module/AccountService-v2"
				method="findAccount">
				<parameter value="${instance.rol.accountName}" />
				<parameter value="${instance.rol.accountSystem}" />
			</ejb-finder>
		</finder>
	</datanode>
	
	<datanode name="user" transient="true" />
	<datanode name="account" transient="true"/>
	
	<datanode name="roleDefinition" transient="true">
		<finder name="role" type="role">
			<ejb-finder
				jndi="openejb:/local/soffid.ejb.com.soffid.iam.service.ApplicationService"
				method="findRoleById">
				<parameter value="${instance.roleId}" />
			</ejb-finder>
		</finder>
	</datanode>

</zkib-model>
