<?xml version="1.0" encoding="UTF-8"?>

<process-definition xmlns="urn:jbpm.org:jpdl-3.3"
	name="User Recertification process">
	<description>
		Process to execute recertification tasks.
	</description>


	<start-state name="Start">
		<description>
			Starts a recertification group process
		</description>
		<transition to="User review"></transition>
	</start-state>


	<task-node name="User review">
		<description>
			Boss can remove any user from the list. Their users will be disabled.
		</description>
		<task name="User permissions review">
			<assignment class="com.soffid.iam.recertification.bpm.UserTaskAssignmentHandler"></assignment>
		</task>
		<transition to="Cancelled" name="Cancel"></transition>
		<transition to="Manager review" name="Bring forward"></transition>
	</task-node>

	<node name="Apply changes">
		<action name="Apply changes" class="com.soffid.iam.recertification.bpm.ApplyChangesHandler"></action>
		<event type="task-create">
			<action name="Create recertification info" class="com.soffid.iam.recertification.bpm.CreateRecertificationInfoHandler"></action>
		</event>
		<transition to="End"></transition>
	</node>

	<task-node name="Manager review">
		<task name="User permissions aproval">
			<assignment class="com.soffid.iam.recertification.bpm.GroupTaskAssignmentHandler"></assignment>
		</task>
		<event type="task-create">
			<action name="Change task name" class="com.soffid.iam.recertification.bpm.ChangeTaskNameHandler"></action>
		</event>
		<transition to="Apply changes" name="Aprove"></transition>
		<transition to="Cancelled" name="Cancel"></transition>
	</task-node>


	<end-state name="Cancelled"></end-state>

	<end-state name="End"></end-state>


	<event type="process-end">
		<action name="end handler" class="com.soffid.iam.recertification.bpm.EndProcessHandler"></action>
	</event>
</process-definition>
